cc.CustomLoaderScene = cc.Scene.extend({
    _interval : null,
    _label : null,
    _className:"LoaderScene",
    cb: null,
    target: null,
    _loaderImage : "data:image/png;base64,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",
    init : function(){
        var self = this;
        var logoWidth = 160;
        var logoHeight = 200;
        var bgLayer = self._bgLayer = new cc.LayerColor(cc.color(32, 32, 32, 255));
        self.addChild(bgLayer, 0);
        var fontSize = 36, lblHeight =  -logoHeight / 2 + 100;
        if(this._loaderImage){
            cc.loader.loadImg(this._loaderImage, {isCrossOrigin : true }, function(err, img){
                logoWidth = img.width;
                logoHeight = img.height;
                self._initStage(img, cc.visibleRect.center);
            });
            fontSize = 14;
            lblHeight = -logoHeight / 2 - 10;
        }
        var label = self._label = new cc.LabelTTF("加载中... 0%", "Arial", fontSize);
        label.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, lblHeight)));
        label.setColor(cc.color(255, 255, 255));
        bgLayer.addChild(this._label, 10);
        return true;
    },
    _initStage: function (img, centerPos) {
        var self = this;
        var texture2d = self._texture2d = new cc.Texture2D();
        texture2d.initWithElement(img);
        texture2d.handleLoadedTexture();
        var logo = self._logo = new cc.Sprite(texture2d);
        logo.setScale(cc.contentScaleFactor());
        logo.x = centerPos.x;
        logo.y = centerPos.y;
        self._bgLayer.addChild(logo, 10);
    },
    onEnter: function () {
        var self = this;
        cc.Node.prototype.onEnter.call(self);
        self.schedule(self._startLoading, 0.3);
    },
    onExit: function () {
        cc.Node.prototype.onExit.call(this);
        var tmpStr = "加载中... 0%";
        this._label.setString(tmpStr);
    },
    initWithResources: function (resources, cb, target) {
        if(cc.isString(resources))
            resources = [resources];
        this.resources = resources || [];
        this.cb = cb;
        this.target = target;
    },
    _startLoading: function () {
        var self = this;
        self.unschedule(self._startLoading);
        var res = self.resources;
        cc.loader.load(res,
            function (result, count, loadedCount) {
                var percent = (loadedCount / count * 100) | 0;
                percent = Math.min(percent, 100);
                self._label.setString("加载中... " + percent + "%");
            }, function () {
                if (self.cb)
                    self.cb.call(self.target);
            });
    },
    _updateTransform: function(){
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
        this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    }
});

cc.CustomLoaderScene.preload = function(resources, cb, target){
    var _cc = cc;
    if(!_cc.customLoaderScene) {
        _cc.customLoaderScene = new cc.CustomLoaderScene();
        _cc.customLoaderScene.init();
        cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED, function(){
            _cc.customLoaderScene._updateTransform();
        });
    }
    _cc.customLoaderScene.initWithResources(resources, cb, target);
    cc.director.runScene(_cc.customLoaderScene);
    return _cc.customLoaderScene;
};